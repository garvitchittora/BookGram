<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="../dist/bootstrap.min.css" />
    <link
    href="https://fonts.googleapis.com/css2?family=Raleway&display=swap"
    rel="stylesheet"
    />
</head>
<body>
    
    <h1 id="your-books" style="display: none;">Your Books</h1>
    <hr>
    <div id="stored-section" class="row">
    </div>

   <div class="container search-box">
    <div class="form-group">
        <input
          id="inp_text"
          type="text"
          class="form-control"
          aria-describedby="emailHelp"
          name="email"
          oninput="reFunc()"
          placeholder="Search Here"
        />
      </div>
   </div>


      <div id="list" class="row"></div>

    <script>
        async function getapi() { 

            const ttl = document.getElementById('inp_text').value;
            const response = await fetch("https://www.googleapis.com/books/v1/volumes?q="+ttl); 
            
            // Storing data in form of JSON 
            var data = await response.json(); 
            // console.log(data.items);

            addData(data)
            } 
        // getapi();

        function reFunc()
        {
            getapi();
        }

        function addData(data)
        {
            let tab =  '<div></div>';

            for(let r of data.items)
            {

                var m1 = r.volumeInfo.title;
                var n1 = r.volumeInfo.imageLinks.thumbnail;
                tab+='<ul class="col-sm-3 books-list">' +
                        '<li maxlength=15><h4>'+ r.volumeInfo.title.substring(0,25)+ '</h4></li>'+
                        '<li><img src=' + r.volumeInfo.imageLinks.thumbnail + ' style="width:150px; height:200px"></li>' +
                        '<li><button type="button" class="example_f" onclick=\"(canLaunch(\'' + m1 +','+ n1 + '\'))"\ id="'+r.id+'">Submit</button></li>'+
                    '</ul>'

            }

            document.getElementById("list").innerHTML = tab; 

        }
        

        let tab1 =  '<div></div>';
        function canLaunch(m)
        {
            console.log(typeof(m));
            document.getElementById('your-books').style.display="block";
            var m2 = m.split(",");
            tab1+='<ul class="col-sm-3 ybks-list"><li><h5>'+ m2[0] + '</li></h5>' + '<li><img src=' + m2[1] + ' style="width:80px; height:120px" class="your-bks-img"></li></ul>';

            document.getElementById("stored-section").innerHTML = tab1; 

        }


    </script>
</body>
</html>


